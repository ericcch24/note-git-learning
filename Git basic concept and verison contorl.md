# Git 基礎概念與版本控制操作
#### 來源：[GIT101]看穿 Git 的把戲

### 簡易比喻概念
* 當檔案更新了，要用 git 建立新版本並加入版本控制 `git add` ==> 等於你先建立一個暫時存放你剛剛更新的檔案的資料夾，檔案每更新一個版本就要多弄一個暫存的資料夾，然後把檔案放到裡面。為了避免不同版本名稱互相衝突難以辨別，git 會用看似亂數的東西當作資料夾名稱。
* 如果這個檔案不會在更動了 `.gitignore`，不想加入版本控制，那就不要加入資料夾。
* 新建版本 `git commit` 把暫存檔案的資料夾改名為你要的版本名稱 --> 也就是當檔案新版本建立好之後，把資料夾改成你要的名字。
* 如果要辨別最新版本的檔案 ==> 額外用一個新檔案來記錄保存。
--------------------
### Git 檢查狀態的指令
* `git status`: 查看目前版本控制的狀態，主要是看有哪些檔案還沒加入stage、哪些檔案被修改過等等。
* `git log`: 查看各個版本的歷史紀錄，有 commit 的亂碼名稱、作者、日期以及版本名稱。
 
----------------
### 版本控制建立
* Step 0: `git init` -- 讓此資料夾可以被 git 控制
* Step 1: `.gitignore` -- 用 `vim .gitignore` 忽略不想要加入版本控制的檔案，想像成此檔案被排除在資料夾外
* Step 2: `git add .` -- 將所有檔案加入版本控制，想像成把東西移入資料夾。**此步驟在每次有新檔案或修改時都要做一次**
  * 註：`git rm --cached` 可以將檔案復原到 untrack 狀態，就是還沒 `git add` 
  * `git add file_name`: 可以只 add 特定檔案到綠色 staged (可以 commit)的狀態，再 commit 就只會針對該檔案，其他紅字則不會被 commit。
* Step 3: `git commit -am "init"` 建立第一個commit，想像成建立一個新版本（建立新資料夾的概念） 

-----------------
### 專案建立後
* 如果有**新增檔案**則需要先進行 Step 2 的 `git add .` 先加入版本控制再用 Step 3 commit
* `git commit -am "版本名稱"` 可將**修改過的現有檔案**加入版本控制`a`然後 commit`m`。
* `git diff` :可以看檔案修改的紀錄（與別的版本的差異）。
  * `git diff commit 1 commit 2` : 兩個 commit 的比較，進入後可按 `/diff` 搜尋那些地方被改過，搜尋字船狀態下按 `N` 可以找到下一個相符的字串並放到第一行。
* git stash >> 可以暫存 git 中已經 track 的檔案，方便切換到其他 commit 或 branch
* git stash pop >> 把暫存的 git 中的 track 檔案拿出來，==注意要在對的 commit 或 branch 使用，在錯的地方 pop 會噴錯== 

-----------
### 簡易流程總結
1. 加入版本控制 `git add` => 把檔案放入叫 temp 的暫時的資料夾 **（圖中的 stage 狀態）**。
2. 新建版本 `git commit` => 把 temp 資料夾複製改名(或直接改名)為版本名稱
3. 切換版本 `git checkout` =>去到某個資料夾底下（也就是把現有版本改成切過去的版本）。

![](https://i.imgur.com/gBDzJpO.png)


###### tags: `Week1`

